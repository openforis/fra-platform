@import 'src/client/style/partials';

$border-editable: 1px dashed $ui-edit-border-color;
$border: 1px solid $ui-border;

.data-cell {
  border-left: $border;
  border-top: $border;
  position: relative;
  transition: background-color 0.2s ease-out;

  &.header {
    background-color: $ui-bg;
    font-weight: 600;
    padding: $spacing-xxs;
  }

  &.actions {
    align-items: center;
    align-self: center;
    border: unset;
    display: flex;

    > .action {
      border-right: $border;
      width: $spacing-m;
    }

    > :last-child {
      border-right: unset;
    }
  }

  &.lastCol {
    border-right: $border;
  }

  &.lastRow {
    border-bottom: $border;
  }

  &.highlighted {
    $border-shadow: 0 0 4px rgba($ui-accent, 50%);
    $outline-left: inset 1px 0 $ui-accent;
    $outline-right: inset -1px 0 $ui-accent;
    $outline-top-bottom: inset 0 1px $ui-accent, inset 0 -1px $ui-accent;

    &::before {
      bottom: 0;
      box-shadow: $outline-top-bottom, $border-shadow;
      clip-path: inset(-4px 0px -4px 0px); // Adds shadow to top, bottom
      content: '';
      height: 100%;
      left: 0;
      pointer-events: none;
      position: absolute;
      right: 0;
      top: 0;
      width: 100%;
      z-index: 1;
    }

    &.firstCol::before {
      box-shadow: $outline-top-bottom, $outline-left, $border-shadow;
      clip-path: inset(-4px 0px -4px -4px); // Adds shadow to top, bottom, left
    }

    &.lastCol::before {
      box-shadow: $outline-top-bottom, $outline-right, $border-shadow;
      clip-path: inset(-4px -4px -4px 0px); // Adds shadow to top, bottom, right
    }

    &.firstCol.lastCol::before {
      box-shadow: $outline-top-bottom, $outline-left, $outline-right, $border-shadow;
      clip-path: inset(-4px -4px -4px -4px); // Adds shadow to top, bottom, left, right
    }
  }
}

.data-cell.editable:not(.noBorder) {
  border-left: $border-editable;
  border-top: $border-editable;

  &.lastCol {
    border-right: $border-editable;
  }

  &.lastRow {
    border-bottom: $border-editable;
  }

  &:focus-within {
    background-color: $ui-input-focus;

    > :first-child:not(a):not(button) {
      outline: 1px solid $ui-edit-border-color;
    }
  }

  &.error:focus-within {
    background-color: rgba($ui-destructive, 0.1);
  }
}

.data-cell.noBorder {
  border: unset;

  &.editable:focus-within {
    background-color: unset;

    > :first-child {
      outline: unset;
    }
  }
}

@include rtl {
  .data-cell {
    border-left: unset;
    border-right: $border;

    &.actions {
      border: unset;

      > .action {
        border: unset;
        border-left: $border;
      }

      > :last-child {
        border-left: unset;
      }
    }

    &.lastCol {
      border-left: $border;
    }
  }

  .data-cell.editable {
    border-right: $border-editable;

    &.lastCol {
      border-left: $border-editable;
    }
  }

  .data-cell.noBorder {
    border: unset;
  }
}
